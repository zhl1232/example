<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <p>123</p>
  <p>123</p>
  <p>123</p>
  <script>
    class jQuery {
      constructor(seletor) {
        // let slice = Array.prototype.slice;       
        // let dom = slice.call(document.querySelectorAll(seletor));
        let dom = Array.from(document.querySelectorAll(seletor));
        let len = dom ? dom.length : 0;
        for (let i = 0; i < len; i++) {
          this[i] = dom[i];
        }
        this.length = len;
        this.seletor = seletor || '';
      }
      append(node) {

      }
      addClass(name) {

      }
      html(data) {

      }
    }
    window.$ = function(seletor) {
      return new jQuery(seletor);
    }

    var $p = $('p');
    console.log($p)

    function loadImg(src) {
      let promise = new Promise((resolve, reject) => {
        let img = document.createElement('img');
        img.onload = function() {
          resolve(img)
        }
        img.onerror = function() {
          reject('图片加载失败`')
        }
        img.src = src;
      });
      return promise
    }
    let src = 'https://i0.hdslb.com/bfs/sycp/tmaterial/201808/63e05e6759dd4f8a6ac79b802ff54f93.jpg';
    let result = loadImg(src);
    result.then(img => {
      alert(`width: ${img.width}`);
      return img
    }).then(img => {
      alert(`height: ${img.height}`);
      return img
    }).catch(ex => {
      alert(ex)
    })
    [1,2,3].map(parseInt);
  </script>
</body>

</html>